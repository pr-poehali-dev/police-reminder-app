CREATE TABLE IF NOT EXISTS articles (
    id SERIAL PRIMARY KEY,
    title VARCHAR(500) NOT NULL,
    content TEXT NOT NULL,
    category VARCHAR(50) NOT NULL CHECK (category IN ('administrative', 'rights', 'laws', 'documents')),
    tags TEXT[] DEFAULT '{}',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_articles_category ON articles(category);
CREATE INDEX idx_articles_tags ON articles USING GIN(tags);

INSERT INTO articles (title, content, category, tags) VALUES
('Статья 20.1 КоАП РФ', 'Мелкое хулиганство — нарушение общественного порядка, выражающее явное неуважение к обществу, сопровождающееся нецензурной бранью в общественных местах, оскорбительным приставанием к гражданам, а равно уничтожением или повреждением чужого имущества.', 'administrative', ARRAY['хулиганство', 'порядок']),
('Право на задержание', 'Полицейский имеет право задержать лицо при наличии достаточных оснований полагать, что это лицо совершило преступление. Срок задержания не может превышать 48 часов.', 'rights', ARRAY['задержание', 'полномочия']),
('Статья 228 УК РФ', 'Незаконные приобретение, хранение, перевозка, изготовление, переработка наркотических средств, психотропных веществ или их аналогов, а также незаконные приобретение, хранение, перевозка растений, содержащих наркотические средства или психотропные вещества.', 'laws', ARRAY['наркотики', 'уголовное']),
('Протокол об административном правонарушении', 'Форма протокола, требования к оформлению и обязательные реквизиты: дата и место составления, должность, фамилия и инициалы лица, составившего протокол, сведения о лице, в отношении которого возбуждено дело.', 'documents', ARRAY['протокол', 'оформление']),
('Статья 12.8 КоАП РФ', 'Управление транспортным средством водителем, находящимся в состоянии опьянения, если такие действия не содержат уголовно наказуемого деяния.', 'administrative', ARRAY['опьянение', 'транспорт']),
('Применение физической силы', 'Полицейский имеет право применять физическую силу в случаях оказания сопротивления законным требованиям, для пресечения преступления или административного правонарушения.', 'rights', ARRAY['применение силы', 'полномочия']),
('Статья 158 УК РФ', 'Кража — тайное хищение чужого имущества. Наказывается штрафом до восьмидесяти тысяч рублей или в размере заработной платы или иного дохода осужденного за период до шести месяцев.', 'laws', ARRAY['кража', 'хищение']),
('Постановление по делу об административном правонарушении', 'Форма и содержание постановления при вынесении решения по делу об административном правонарушении. Должно содержать: описание правонарушения, указание на статью закона, размер наказания.', 'documents', ARRAY['постановление', 'решение']);
